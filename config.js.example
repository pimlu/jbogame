var fs=require('fs'),
  path=require('path');
var config = {};
var dnjoin=config.dnjoin=path.join.bind(path,__dirname);
config.static=function(app,express) {
  return function(url,dir) {
    app.use(url,express.static(dnjoin(dir)))
  };
};
config.proxy={};//head of everything
config.front={};//frontend website
config.server={};//gameservers
config.proxy.workers=1;
config.proxy.port=8080;
config.proxy.ports=8443;
config.proxy.https=function() {
  return {
    key: fs.readFileSync('./proxy/https/zdelu.key'),
    cert: fs.readFileSync('./proxy/https/zdelu.crt')
  };
};
config.front.host='127.0.0.1';
config.front.workers=1;
config.front.port=1300;
config.front.rounds=8;
config.front.tokenl=32;
config.front.cd={};
config.front.cd.dir='client';
config.front.tools=false;
var main='./server/index.js';
config.server.types={
  'mix':main,
  'jbo':main,
  'eng':main
};
config.server.host='127.0.0.1';
config.server.max=2000;
config.server.statustime=10000;//average time between status reports
config.server.wdtime=1000;//time before watchdog complains
config.server.worlds={};
config.server.worlds[1]=['mix',8081];
config.knex={
  client:'pg',
  connection: {
    host:'127.0.0.1',
    user:'postgres',
    database:'jbogame'
  }
};
config.redis={
  host:'127.0.0.1',
  port:6379,
  options:{}
};
config.brute=function() {
  // stores state locally, don't use this in production
  var ExpressBrute=require('express-brute'),
  store=new (ExpressBrute.MemoryStore)();
  return new ExpressBrute(store,{
    maxWait:600000//10m
  });
};
module.exports = config;
